<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dia a Dia</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- √çcones (Feather Icons) -->
    <script src="https://unpkg.com/feather-icons"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .completed > div > .task-text { text-decoration: line-through; color: #9ca3af; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .tab-button { background-color: white; color: #374151; }
        .tab-button:hover { background-color: #f3f4f6; }
        .tab-button.active { color: white; }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <!-- Container Principal -->
    <div class="container mx-auto p-4 sm:p-6 lg:p-8 max-w-4xl">

        <!-- Cabe√ßalho com Data -->
        <header class="text-center mb-6">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-900">Dia a Dia</h1>
            <p id="current-date" class="text-gray-600 mt-2 text-lg"></p>
        </header>

        <!-- Navega√ß√£o por Abas -->
        <div id="tabs" class="mb-6 flex flex-wrap justify-center gap-2">
            <button data-tab="geral" class="tab-button py-2 px-4 rounded-lg font-semibold transition-colors duration-200">Vis√£o Geral</button>
            <button data-tab="trabalho" class="tab-button py-2 px-4 rounded-lg font-semibold transition-colors duration-200">Trabalho</button>
            <button data-tab="estudo" class="tab-button py-2 px-4 rounded-lg font-semibold transition-colors duration-200">Estudo</button>
            <button data-tab="atividade-fisica" class="tab-button py-2 px-4 rounded-lg font-semibold transition-colors duration-200">Atividade F√≠sica</button>
            <button data-tab="alimentacao" class="tab-button py-2 px-4 rounded-lg font-semibold transition-colors duration-200">Alimenta√ß√£o</button>
            <button data-tab="saude" class="tab-button py-2 px-4 rounded-lg font-semibold transition-colors duration-200">Sa√∫de</button>
        </div>

        <!-- Conte√∫do das Abas -->
        <main id="tab-contents">
             <!-- Aba Vis√£o Geral (com Relat√≥rio) -->
            <div id="geral" class="tab-content bg-white p-6 rounded-2xl shadow-md border border-gray-200">
                <h2 class="text-2xl font-semibold text-gray-700 mb-4">‚ú® Timeline do Dia</h2>
                <ul id="geral-list" class="space-y-3 mb-4"></ul>

                <!-- Se√ß√£o do Relat√≥rio -->
                <div class="mt-8 pt-6 border-t-2 border-gray-100">
                    <h2 class="text-2xl font-semibold text-gray-700 mb-4">üìà Relat√≥rio de Progresso</h2>
                    <div id="report-summary" class="text-center p-4 rounded-lg bg-gray-50 mb-6"></div>
                    <div id="report-details" class="space-y-4"></div>
                    <div id="pending-tasks-summary" class="mt-8 pt-4 border-t">
                        <h3 class="text-xl font-semibold text-gray-700 mb-2">Tarefas Pendentes</h3>
                        <ul id="pending-tasks-list" class="space-y-2"></ul>
                    </div>
                </div>
            </div>
            <!-- Abas de Categoria -->
            <div id="trabalho" class="tab-content bg-white p-6 rounded-2xl shadow-md border border-gray-200"></div>
            <div id="estudo" class="tab-content bg-white p-6 rounded-2xl shadow-md border border-gray-200"></div>
            <div id="atividade-fisica" class="tab-content bg-white p-6 rounded-2xl shadow-md border border-gray-200"></div>
            <div id="alimentacao" class="tab-content bg-white p-6 rounded-2xl shadow-md border border-gray-200"></div>
            <div id="saude" class="tab-content bg-white p-6 rounded-2xl shadow-md border border-gray-200"></div>
        </main>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const tabsContainer = document.getElementById('tabs');
        const tabContentsContainer = document.getElementById('tab-contents');
        const dateDisplay = document.getElementById('current-date');
        let tasks = {};

        // --- DEFINI√á√ÉO DE CORES E √çCONES ---
        const categoryConfig = {
            geral:           { prefix: 'text-gray-500',   activeTab: 'bg-gray-600',   checkbox: 'text-gray-600',   ring: 'ring-gray-500',   icon: '‚ú®', title: 'Vis√£o Geral' },
            trabalho:        { prefix: 'text-blue-500',   activeTab: 'bg-blue-600',   checkbox: 'text-blue-600',   ring: 'ring-blue-500',   icon: 'üíº', title: 'Trabalho' },
            estudo:          { prefix: 'text-yellow-500', activeTab: 'bg-yellow-500', checkbox: 'text-yellow-500', ring: 'ring-yellow-500', icon: 'üìö', title: 'Estudo' },
            'atividade-fisica': { prefix: 'text-red-500',    activeTab: 'bg-red-600',    checkbox: 'text-red-600',    ring: 'ring-red-500',    icon: 'üí™', title: 'Atividade F√≠sica' },
            alimentacao:     { prefix: 'text-green-500',  activeTab: 'bg-green-600',  checkbox: 'text-green-600',  ring: 'ring-green-500',  icon: 'üçé', title: 'Alimenta√ß√£o' },
            saude:           { prefix: 'text-purple-500', activeTab: 'bg-purple-600', checkbox: 'text-purple-600', ring: 'ring-purple-500', icon: '‚ù§Ô∏è', title: 'Sa√∫de' },
        };

        // --- L√ìGICA DE DADOS E TAREFAS ---
        function generateInitialTasks() {
            const today = new Date();
            const dayOfWeek = today.getDay();
            const dayOfMonth = today.getDate();
            const newTasks = {
                trabalho: [
                    { id: Date.now() + 1, text: 'Subir Volumetria', time: '07:50', completed: false },
                    { id: Date.now() + 2, text: 'Preparar Fup', time: '08:00', completed: false },
                    { id: Date.now() + 3, text: 'Falta de Volume', time: '08:20', completed: false },
                    { id: Date.now() + 4, text: 'Analisar rotas da expedi√ß√£o no Web Varejo', time: '09:00', completed: false }
                ],
                estudo: [],
                'atividade-fisica': [],
                alimentacao: [
                    { id: Date.now() + 5, text: '1¬∞ Refei√ß√£o - Pr√©-dia', time: '05:20', completed: false },
                    { id: Date.now() + 6, text: '2¬∞ Refei√ß√£o - Caf√© da manh√£', time: '06:40', completed: false },
                    { id: Date.now() + 7, text: '3¬∞ Refei√ß√£o - Lanche da manh√£', time: '09:30', completed: false },
                    { id: Date.now() + 8, text: '4¬∞ Refei√ß√£o - Almo√ßo', time: '12:30', completed: false },
                    { id: Date.now() + 9, text: '5¬∞ Refei√ß√£o - Pr√©-treino', time: '15:30', completed: false },
                    { id: Date.now() + 10, text: '6¬∞ Refei√ß√£o - Jantar', time: '20:00', completed: false }
                ],
                saude: [ { id: Date.now() + 11, text: 'Tomar creatina', time: '07:10', completed: false } ]
            };
            
            const workoutPlan = ['Domingo: Ombro, panturrilha e ABS', 'Segunda: Perna', 'Ter√ßa: Costas, b√≠ceps e trap√©zio', 'Quarta: Peito, tr√≠ceps e ombro', 'Quinta: Costas, b√≠ceps', 'Sexta: Peito e tr√≠ceps', 'S√°bado: Baba'];
            let workoutTime = '18:30';
            if (dayOfWeek === 6) workoutTime = '06:00';
            if (dayOfWeek === 0) workoutTime = '08:00';
            newTasks['atividade-fisica'].push({ id: Date.now() + 12, text: workoutPlan[dayOfWeek], time: workoutTime, completed: false });

            if (dayOfWeek >= 1 && dayOfWeek <= 6) {
                const studyTopic = (dayOfMonth % 2 === 0) ? 'PROGRAMA√á√ÉO DE SOLU√á√ïES COMPUTACIONAIS' : 'MODELAGEM DE SOFTWARE';
                newTasks.estudo.push({ id: Date.now() + 13, text: `Estudar a noite: ${studyTopic}`, time: '21:00', completed: false });
            }
            if (dayOfMonth % 2 !== 0) {
                newTasks.estudo.push({ id: Date.now() + 14, text: 'Estudar curso de BI e Excel', time: '21:00', completed: false });
            }
            return newTasks;
        }

        function loadTasks() {
            const todayKey = `dailyTasks-${new Date().toLocaleDateString('pt-BR')}`;
            const savedTasks = localStorage.getItem(todayKey);
            tasks = savedTasks ? JSON.parse(savedTasks) : generateInitialTasks();
            saveTasks();
        }

        function saveTasks() {
            const todayKey = `dailyTasks-${new Date().toLocaleDateString('pt-BR')}`;
            localStorage.setItem(todayKey, JSON.stringify(tasks));
        }

        // --- FUN√á√ïES DE MANIPULA√á√ÉO DO DOM ---
        function displayDate() {
            const now = new Date();
            const days = ['Domingo', 'Segunda-feira', 'Ter√ßa-feira', 'Quarta-feira', 'Quinta-feira', 'Sexta-feira', 'S√°bado'];
            dateDisplay.textContent = `${days[now.getDay()]}, ${now.toLocaleDateString('pt-BR')}`;
        }

        function createTaskElement(task, categoryForElement) {
            const li = document.createElement('li');
            li.className = 'flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 transition-colors duration-150';
            if (task.completed) li.classList.add('completed');

            const taskCategory = task.category || categoryForElement;
            const colors = categoryConfig[taskCategory];
            
            const isGeneralView = categoryForElement === 'geral';
            const prefix = isGeneralView ? `<span class="text-xs font-bold uppercase ${colors.prefix} mr-2">${taskCategory.replace('-', ' ')}:</span>` : '';

            li.innerHTML = `
                <div class="flex items-center flex-grow min-w-0">
                    <span class="font-semibold text-gray-500 w-14 text-left">${task.time || ''}</span>
                    <input type="checkbox" data-id="${task.id}" class="h-5 w-5 rounded border-gray-300 ${colors.checkbox} focus:${colors.ring} flex-shrink-0 mx-3" ${task.completed ? 'checked' : ''}>
                    <span class="task-text text-lg text-gray-700 truncate">${prefix}${task.text}</span>
                </div>
                <button class="remove-task-btn text-gray-400 hover:text-red-500 transition-colors ml-2" data-id="${task.id}" data-category="${taskCategory}">
                    <i data-feather="trash-2" class="w-5 h-5"></i>
                </button>
            `;
            return li;
        }

        function renderCategoryTab(category) {
            const config = categoryConfig[category];
            const container = document.getElementById(category);
            container.innerHTML = `
                <h2 class="text-2xl font-semibold text-gray-700 mb-4">${config.icon} ${config.title}</h2>
                <ul id="${category}-list" class="space-y-3 mb-4"></ul>
                <form class="add-task-form flex flex-wrap gap-2 items-center">
                    <input type="text" placeholder="Nova tarefa..." class="flex-grow p-2 border rounded-lg focus:ring-2 focus:${config.ring} focus:outline-none">
                    <input type="time" class="p-2 border rounded-lg focus:ring-2 focus:${config.ring} focus:outline-none">
                    <button type="submit" class="${config.activeTab} text-white px-4 py-2 rounded-lg font-semibold hover:opacity-90 transition-opacity">Adicionar</button>
                </form>
            `;
        }
        
        function renderReport() {
            const reportSummaryEl = document.getElementById('report-summary');
            const reportDetailsEl = document.getElementById('report-details');
            const pendingTasksListEl = document.getElementById('pending-tasks-list');
            
            reportDetailsEl.innerHTML = '';
            pendingTasksListEl.innerHTML = '';

            let totalTasks = 0;
            let totalCompleted = 0;
            const allPendingTasks = [];
            const now = new Date();
            const currentHours = now.getHours();
            const currentMinutes = now.getMinutes();

            Object.keys(tasks).forEach(category => {
                const categoryTasks = tasks[category];
                if (categoryTasks.length === 0) return;

                const config = categoryConfig[category];
                const categoryCompleted = categoryTasks.filter(t => t.completed).length;
                const categoryTotal = categoryTasks.length;
                const percentage = categoryTotal > 0 ? (categoryCompleted / categoryTotal) * 100 : 0;

                totalTasks += categoryTotal;
                totalCompleted += categoryCompleted;

                categoryTasks.forEach(task => {
                    if (!task.completed) {
                        allPendingTasks.push({ ...task, category });
                    }
                });

                const detailDiv = document.createElement('div');
                detailDiv.innerHTML = `
                    <div class="flex justify-between items-center mb-1">
                        <span class="font-semibold ${config.prefix}">${config.icon} ${config.title}</span>
                        <span class="text-sm font-medium text-gray-500">${categoryCompleted} / ${categoryTotal}</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-4">
                        <div class="${config.activeTab} h-4 rounded-full transition-all duration-500" style="width: ${percentage}%"></div>
                    </div>
                `;
                reportDetailsEl.appendChild(detailDiv);
            });
            
            // Ordena a lista de tarefas pendentes por hor√°rio
            allPendingTasks.sort((a, b) => (a.time || '99:99').localeCompare(b.time || '99:99'));

            // Renderiza a lista de tarefas pendentes j√° ordenada
            allPendingTasks.forEach(task => {
                const config = categoryConfig[task.category];
                let status = { text: 'Pendente', color: 'text-gray-500' };
                if (task.time) {
                    const [taskHours, taskMinutes] = task.time.split(':').map(Number);
                    if (taskHours < currentHours || (taskHours === currentHours && taskMinutes < currentMinutes)) {
                        status = { text: 'Atrasado', color: 'text-red-500' };
                    }
                }
                const li = document.createElement('li');
                li.className = 'flex justify-between items-center';
                li.innerHTML = `
                    <span class="text-gray-600">${task.time ? `[${task.time}]` : ''} ${task.text} (${config.title})</span>
                    <span class="font-semibold text-sm ${status.color}">${status.text}</span>
                `;
                pendingTasksListEl.appendChild(li);
            });


            const overallPercentage = totalTasks > 0 ? Math.round((totalCompleted / totalTasks) * 100) : 0;
            reportSummaryEl.innerHTML = `
                <p class="text-lg text-gray-600">Progresso Geral</p>
                <p class="text-4xl font-bold text-gray-800">${overallPercentage}%</p>
                <p class="text-md text-gray-500">${totalCompleted} de ${totalTasks} tarefas conclu√≠das</p>
            `;

            if (pendingTasksListEl.children.length === 0) {
                 pendingTasksListEl.innerHTML = '<li class="text-center text-gray-500">Parab√©ns! Todas as tarefas foram conclu√≠das.</li>';
            }
        }

        function renderAll() {
            const geralList = document.getElementById('geral-list');
            geralList.innerHTML = '';
            const allTasksFlat = Object.keys(tasks).flatMap(category => tasks[category].map(task => ({ ...task, category })));
            allTasksFlat.sort((a, b) => (a.time || '99:99').localeCompare(b.time || '99:99'));
            allTasksFlat.forEach(task => {
                geralList.appendChild(createTaskElement(task, 'geral'));
            });
            Object.keys(tasks).forEach(category => {
                const listElement = document.getElementById(`${category}-list`);
                if(listElement) {
                    listElement.innerHTML = '';
                    tasks[category]
                        .sort((a, b) => (a.time || '99:99').localeCompare(b.time || '99:99'))
                        .forEach(task => listElement.appendChild(createTaskElement(task, category)));
                }
            });
            renderReport();
            feather.replace();
        }

        // --- L√ìGICA DE EVENTOS ---
        tabsContainer.addEventListener('click', (e) => {
            if (e.target.tagName === 'BUTTON') {
                const targetTab = e.target.dataset.tab;
                tabsContainer.querySelectorAll('.tab-button').forEach(btn => {
                    btn.classList.remove('active');
                    Object.values(categoryConfig).forEach(color => btn.classList.remove(color.activeTab));
                });
                e.target.classList.add('active', categoryConfig[targetTab].activeTab);
                tabContentsContainer.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                document.getElementById(targetTab).classList.add('active');
            }
        });

        tabContentsContainer.addEventListener('submit', (e) => {
            if (e.target.classList.contains('add-task-form')) {
                e.preventDefault();
                const form = e.target;
                const textInput = form.querySelector('input[type="text"]');
                const timeInput = form.querySelector('input[type="time"]');
                const taskText = textInput.value.trim();
                const taskTime = timeInput.value;
                const category = form.closest('.tab-content').id;
                if (taskText) {
                    tasks[category].push({ id: Date.now(), text: taskText, time: taskTime, completed: false });
                    textInput.value = '';
                    timeInput.value = '';
                    saveTasks();
                    renderAll();
                }
            }
        });
        
        tabContentsContainer.addEventListener('click', (e) => {
            const checkbox = e.target.closest('input[type="checkbox"]');
            const removeBtn = e.target.closest('.remove-task-btn');
            if (checkbox) {
                const taskId = Number(checkbox.dataset.id);
                Object.values(tasks).flat().forEach(task => {
                    if (task.id === taskId) task.completed = checkbox.checked;
                });
                saveTasks();
                renderAll();
            }
            if (removeBtn) {
                const taskId = Number(removeBtn.dataset.id);
                const category = removeBtn.dataset.category;
                tasks[category] = tasks[category].filter(task => task.id !== taskId);
                saveTasks();
                renderAll();
            }
        });

        // --- INICIALIZA√á√ÉO ---
        function init() {
            displayDate();
            Object.keys(categoryConfig).forEach(cat => {
                if (cat !== 'geral') renderCategoryTab(cat);
            });
            loadTasks();
            renderAll();
            document.querySelector('.tab-button[data-tab="geral"]').click();
        }

        init();
    });
    </script>
</body>
</html>
